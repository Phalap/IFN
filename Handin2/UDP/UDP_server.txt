#!/usr/bin/env python3

import socket

UDP_IP = "10.0.0.1"
UDP_PORT = 9001

sock = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)

sock.bind((UDP_IP,UDP_PORT))


while True:

	data, addr = sock.recvfrom(1024)
	print "New client connected"
	print("Received:", data)


	if data in ('U','u'):
		print("Serveren modtog et U")
		myfile = open("/proc/uptime","r") 
		fil = myfile.read()

		sock.sendto(fil, addr)
		print("Sent:")
		print(fil)

		

	elif data in ('L','l'):
		print("Serveren modtog et L")
		myfile = open("/proc/loadavg","r") 
		fil = myfile.read()

		sock.sendto(fil,addr)
		print("Sent:")
		print(fil)


	else:
		print("Serveren modtog et ugyldigt tegn")